<html>
<head>
<meta charset="UTF-8">
<title>YouTubeCC</title>
<link rel='stylesheet' href='main.css?ver=1.0.0' type='text/css' media='all' />
</head>
<body>
	<h1>YouTubeのURLと字幕ファイル（.sbv）を同期させるプレーヤー</h1>
	<form name="form">
		<div id="form_caption">とりあえず動作させてみたい方向けのデモデータ設定</div>
		<input id="demoButton" type="button" value="設定" name="demoButton" />
		<hr />
		<div id="form_caption">■動画のURL</div>
		<p>YouTubeのURLを指定して読み込みボタンを押してください。動画が読み込まれて表示されます。</p>
		<input id="videoURL" type="text" name="videoURL" value="" style="width:500px;"/>
		<input id="loadVideoButton" type="button" value="読み込み" name="loadVideoButton" />
		<hr />
		<div id="form_caption" >■字幕ファイルを読み込み</div>
		<p>URLまたはローカルのファイルからsbvファイルを読み込ませます。</p>
		<div id="form_caption" >URLから</div>
		<input id="sbvFileURL" type="text" name="sbvFileURL" value="" style="width:500px;"/>
		<input id="loadSbvFileButton" type="button" value="読み込み" name="loadSbvFileButton" />
		<div id="formCaption" >ローカルファイルから</div>
		<input id="selectSbvFile" name="selectSbvFile" type="file" /><br />
	</form>
	
	<hr />
	<div id="target_video" style="align-content: center;"></div>

	<p id="currentSubtitle" style="text-align: center; font-size: xx-large;"></p>
	<!--<p id="currentTime"></p>-->
	
</body>

<script src="video_cc_script.js"></script>
<script>

	var form = document.forms.form ;
	
	form.loadVideoButton.addEventListener('click', function(e) {
		var width = 640 ;
		var height = 390 ;
		var videoId = getVideoIdFromYouTubeURL(form.videoURL.value) ;
		
		loaVideo(width, height, videoId) ;
	}) ;
	
	form.demoButton.addEventListener('click', function(e) {
		form.videoURL.value = "https://www.youtube.com/watch?v=VTyBvfpTcio" ;
		form.sbvFileURL.value = "https://shamrockrecords.github.io/YouTubeCC/caption.sbv" ;
	}) ;

	form.loadSbvFileButton.addEventListener('click', function(e) {
		loadSbvFileFromURL(form.sbvFileURL.value) ;
	}) ;

	form.selectSbvFile.addEventListener('change', function(e) {
		var file = e.target.files[0];
		var fileReader = new FileReader() ;
	
		fileReader.readAsText(file) ;
		
		fileReader.addEventListener('load', function() {
			var contents = fileReader.result ;
			
			loadSbvFile(contents) ;
		}) ;
	})
</script>
</html>